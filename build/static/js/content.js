(()=>{const e=".present-single-question__head fieldset legend",t=".present-single-question__head fieldset div",n=".present-single-question__body .mdc-form-field",o=".present-single-question__head fieldset img",r="button",c="C\xe2u h\u1ecfi ti\u1ebfp theo",i="font-size: 20px; color:#39C134; font-family: Inter";let[s,l,a,d]=[[],[],[],[]];const[u,h,g]=[{},new Set,[]],m=["A. ","B. ","C. ","D. "];function f(e){return e.normalize("NFKC").replace(/\s+/g," ").trim()}async function y(e){const t=e.split("/").pop(),n=g.find((e=>e.name===t));if(n)return n.src;try{const n=await fetch(e);if(!n.ok)throw new Error("M\u1ea5t k\u1ebft n\u1ed1i");const o=await n.blob(),r=new FormData;r.append("blob",o);const c=await fetch("https://api.luusytruong.id.vn/lms/temp.php",{method:"POST",body:r});if(!c.ok)throw new Error("M\u1ea5t k\u1ebft n\u1ed1i");const i=await c.json();if(i.src)return g.push({name:t,src:i.src}),console.log("th\xe0nh c\xf4ng"),i.src;throw new Error(`L\u1ed7i: ${i}`)}catch(o){return console.error(o),{error:!0}}}function p(e){const t=e.target,n=parseInt(t.dataset.index,10);"radio"===(null===t||void 0===t?void 0:t.type)?(h.clear(),h.add(n)):null!==t&&void 0!==t&&t.checked?h.add(n):h.delete(n),async function(){for(let e=0;e<l.length;e++){var t;const n=null!==(t=l[e])&&void 0!==t?t:a[e];n&&(s[e]=(h.has(e)?`*${m[e]}`:m[e])+n)}d[u.no-1]={...u,options:s,select:Array.from(h)},await async function(t,n){try{"undefined"!==typeof chrome&&chrome.storage?chrome.storage.local.set({[t]:n},(()=>{console.log(`L\u01b0u th\xe0nh c\xf4ng v\u1edbi key: ${t}`)})):console.error("L\u1ed7i: kh\xf4ng ph\u1ea3i m\xf4i tr\u01b0\u1eddng extension")}catch(e){console.error("handle save: "+e.message)}}("test",d)}()}async function v(r){if(!r)return;const c=await w("auto"),d=new Set(c),g=document.querySelectorAll(n),m=document.querySelector(t),v=document.querySelector(e),b=document.querySelector(o);h.clear(),[s,l,a]=[[],[],[]],u.img_src="",m&&(u.text=m.innerText.normalize("NFKC").trim()),v&&(u.no=parseInt(v.innerText.replace(/\D/g,""))),b&&await new Promise((e=>{const t=setInterval((async()=>{b.src.includes("blob")&&(clearInterval(t),u.img_src=await y(b.src),e())}),10)}));for(let e=0;e<g.length;e++){const t=g[e].querySelector("input"),n=g[e].querySelector("label"),o=g[e].querySelector("img");if(t&&(t.dataset.index=e,t.removeEventListener("click",p),t.addEventListener("click",p)),n&&""!==n.innerText){const t=f(n.innerText),o=f(u.text+" "+t).toLowerCase();if(l[e]=t,r&&d.has(o)){const e=setInterval((()=>{l.length<g.length||(clearInterval(e),n.classList.add("selected-hehe"),n.click())}),10)}}else if(o){const t=await y(o.src);a[e]={type:"img",src:t}}}console.log("%c\ud83d\udfe9 T\u1ea3i c\xe2u h\u1ecfi",i)}async function w(e){if("undefined"!==typeof chrome||chrome.storage)return new Promise(((t,n)=>{try{chrome.storage.local.get([e],(n=>{n[e]?(console.log(`L\u1ea5y th\xe0nh c\xf4ng v\u1edbi key: ${e}`),t(n[e])):(console.log(`L\u1ea5y th\u1ea5t b\u1ea1i v\u1edbi key: ${e}`),t([]))}))}catch(o){console.error("handle Get: "+o.message),n(o)}}));console.error("L\u1ed7i: kh\xf4ng ph\u1ea3i m\xf4i tr\u01b0\u1eddng extension")}console.clear(),window.location.href.includes("lms.ictu.edu.vn")&&(!async function(){const e=await w("settings"),t=document.querySelector(".app-version");null!==e&&void 0!==e&&e.toggle&&(t&&t.addEventListener("click",(()=>{v(null===e||void 0===e?void 0:e.auto)})),function(e){const t=()=>{t.debouncing||(t.debouncing=!0,setTimeout((()=>{v(e),t.debouncing=!1}),100))};setInterval((()=>{const n=Array.from(document.querySelectorAll(r)).find((e=>e.label===c||e.innerText.trim()===c));n&&!n.dataset.event&&(n.dataset.event=!0,console.log("%c\ud83d\udfe9 \u0110\xe3 th\u1ea5y n\xfat",i),n.addEventListener("click",t),v(e))}),1e3)}(null===e||void 0===e?void 0:e.auto))}(),window.addEventListener("contextmenu",(function(e){e.stopPropagation()}),!0))})();
//# sourceMappingURL=content.js.map